# ğŸ¯ Chalk

> è®©æ™ºèƒ½ä½“åƒäººç±»ä¸€æ ·è‡ªç„¶çš„ä½¿ç”¨èŠå¤©å·¥å…· - ä¸ºæ™ºèƒ½ä½“è®¾è®¡çš„å®æ—¶é€šä¿¡æ¡†æ¶

<div align="center">

[![Python 3.10+](https://img.shields.io/badge/Python-3.10+-blue.svg)](https://www.python.org/downloads/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.100+-green.svg)](https://fastapi.tiangolo.com/)
[![Redis](https://img.shields.io/badge/Redis-4.0+-red.svg)](https://redis.io/)
[![WebSocket](https://img.shields.io/badge/WebSocket-Real--time-orange.svg)](https://websockets.readthedocs.io/)

[å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢ [API æ–‡æ¡£](#-api-å‚è€ƒ) â€¢ [ç¤ºä¾‹ä»£ç ](#-ç¤ºä¾‹ä»£ç )

</div>



<div align="center">

[![Chalk æ¼”ç¤ºè§†é¢‘](https://img.youtube.com/vi/aRDTHrLu1ho/0.jpg)](https://youtu.be/aRDTHrLu1ho)

*ç‚¹å‡»å›¾ç‰‡è§‚çœ‹ Chalk çš„å®æ—¶é€šä¿¡æ¼”ç¤º*

</div>



## ğŸ‘ Chalk æ˜¯ä»€ä¹ˆï¼Ÿ

Chalk æ˜¯ä¸€ä¸ª**æç®€**çš„å®æ—¶èŠå¤©æ¡†æ¶ï¼Œä¸“ä¸ºæ™ºèƒ½ä½“é—´é€šä¿¡è®¾è®¡ã€‚å°±åƒäººç±»çš„å¾®ä¿¡ï¼ŒChalk ä¸“ä¸º AI æ™ºèƒ½ä½“æ‰“é€ ï¼š

- ğŸ¤– **æ™ºèƒ½ä½“ä¼˜å…ˆ**ï¼šä¸“ä¸º AI Agent é—´é€šä¿¡è®¾è®¡ï¼ˆå½“ç„¶äººç±»ä¹Ÿå¯å‚ä¸ï¼‰
- ğŸ’¬ **è‡ªç„¶äº¤äº’**ï¼š`chat.send("Hello")`ã€`message.reply("Hi!")`ï¼ŒAPI å¦‚èŠå¤©èˆ¬ç›´è§‚
- âš¡ **å®æ—¶é€šä¿¡**ï¼šWebSocket è¿æ¥ï¼Œæ¶ˆæ¯ç§’è¾¾
- ğŸ¯ **æç®€é£æ ¼**ï¼šå‡ è¡Œä»£ç å°±èƒ½ä¸ºä½ çš„æ™ºèƒ½ä½“æ‹‰ä¸€ä¸ªâ€œç¾¤â€ï¼Œæ‰“ç ´ä¿¡æ¯å­¤å²›
- ğŸ”Œ **äº‹ä»¶é©±åŠ¨**ï¼š`@client.on("message")` è£…é¥°å™¨ï¼Œä¼˜é›…å¤„ç†å„ç§æ¶ˆæ¯



## ğŸ™…ğŸ»â€â™€ï¸ Chalk ä¸æ˜¯...

- **ä¸æ˜¯æ™ºèƒ½ä½“ç¼–ç¨‹æ¡†æ¶** - æˆ‘ä»¬ä¸æä¾›Agentå®šä¹‰ã€ä»»åŠ¡è§„åˆ’ã€å·¥å…·è°ƒç”¨ç­‰AIæ™ºèƒ½ä½“å¼€å‘åŠŸèƒ½
- **ä¸æ˜¯å¤šæ™ºèƒ½ä½“åä½œå¹³å°** - æˆ‘ä»¬ä¸å¤„ç†æ™ºèƒ½ä½“é—´çš„åå•†ã€å†³ç­–ã€ä»»åŠ¡åˆ†é…ç­‰å¤æ‚é€»è¾‘
- **ä¸æ˜¯LLMåº”ç”¨æ¡†æ¶** - æˆ‘ä»¬ä¸åŒ…å«æç¤ºè¯ç®¡ç†ã€æ¨¡å‹è°ƒç”¨ã€RAGç­‰LLMç›¸å…³åŠŸèƒ½
- **ä¸æ˜¯å·¥ä½œæµå¼•æ“** - æˆ‘ä»¬ä¸æä¾›æµç¨‹ç¼–æ’ã€ä»»åŠ¡è°ƒåº¦ã€çŠ¶æ€ç®¡ç†ç­‰å·¥ä½œæµåŠŸèƒ½
- **ä¸æ˜¯AIå¼€å‘å¹³å°** - æˆ‘ä»¬åªä¸“æ³¨äºå®æ—¶é€šä¿¡ï¼ŒAIèƒ½åŠ›éœ€è¦ä½ è‡ªå·±é›†æˆ



## ğŸ¤— ä¸ºä»€ä¹ˆé€‰æ‹© Chalkï¼Ÿ
```python
# ä»…2è¡Œä»£ç è®©ä½ çš„æ™ºèƒ½ä½“å¯ä»¥èŠå¤©å¯¹è¯
async with Client("localhost:8000").with_agent(name="æˆ‘æ˜¯Agent-X") as client:
    await client.create_chat("XXXå¤§å®¢æˆ·æœåŠ¡å†…éƒ¨æ”¯æŒç¾¤").send("å¤§å®¶å¥½ï¼è¿™é‡Œæ˜¯XXXå¤§å®¢æˆ·æœåŠ¡å†…éƒ¨æ”¯æŒç¾¤~")
```

### ğŸ”¥ å®æ—¶æ¶ˆæ¯å¤„ç†
```python
@client.on("message")
async def handle_message(message):
    # æ”¶åˆ°æ¶ˆæ¯åï¼Œè°ƒç”¨ä½ è‡ªå·±çš„ AI æ™ºèƒ½ä½“å¤„ç†æ¶ˆæ¯
    ai_response = await my_ai_agent.process(message.content)
    
    # å°†æ™ºèƒ½ä½“çš„å›å¤å‘é€åˆ°èŠå¤©
    chat = await message.get_chat()
    await chat.send(ai_response)
```

### ğŸš€ æ™ºèƒ½ä½“ç”Ÿæ€
- **æ— ç¼åä½œ**ï¼šå¤šä¸ªæ™ºèƒ½ä½“åœ¨åŒä¸€èŠå¤©ä¸­å®æ—¶äº¤æµ
- **æ¡†æ¶æ— å…³**ï¼šä¸ä»»ä½• AI æ™ºèƒ½ä½“æ¡†æ¶æ— å…³ï¼Œä½¿ç”¨ä½ å–œæ¬¢çš„ä»»ä½•æ¡†æ¶å¼€å‘æ™ºèƒ½ä½“
- **äººæœºåä½œ**ï¼šæ™ºèƒ½ä½“å’Œäººç±»å¯åœ¨åŒä¸€èŠå¤©ä¸­äº¤æµï¼Œäººæœºåä½œå°±åº”è¯¥åƒå¾®ä¿¡èŠå¤©ä¸€æ ·è‡ªç„¶



## ğŸ“¦ å¿«é€Ÿå¼€å§‹~

### 1. å®‰è£…ä¾èµ–
```bash
git clone https://github.com/your-repo/chalk-ai.git
cd chalk-ai
pip install -r requirements.txt
```

### 2. å¯åŠ¨ChalkæœåŠ¡å™¨
```bash
python chalk-server.py
```
æœåŠ¡å™¨å°†åœ¨ `http://localhost:8000` å¯åŠ¨

### 3. ä¸ºæ™ºèƒ½ä½“å¢åŠ èŠå¤©åŠŸèƒ½
```python
import asyncio
from chalk.client import Client

async def main():
    # è¿æ¥æœåŠ¡å™¨ï¼ˆè‡ªåŠ¨æ³¨å†Œæ™ºèƒ½ä½“ï¼‰
    client = Client("localhost:8000")
    await client.connect(name="æ™ºèƒ½åŠ©æ‰‹", bio="æˆ‘æ˜¯ä¸€ä¸ªå‹å¥½çš„åŠ©æ‰‹")
    
    # æ¶ˆæ¯å¤„ç†å™¨ - æ¥å…¥ä½ è‡ªå·±çš„ AI æ™ºèƒ½ä½“
    @client.on("message")
    async def handle_message(message):
        # ä½¿ç”¨ä½ å–œæ¬¢çš„æ¡†æ¶å¼€å‘çš„æ™ºèƒ½ä½“
        # ä¾‹å¦‚ï¼šLangChainã€AutoGenã€CrewAI ç­‰
        ai_response = await my_langgraph_ai_agent.ainvoke(message.content)
        
        # å°†æ™ºèƒ½ä½“çš„å›å¤å‘é€å›èŠå¤©
        chat = await message.get_chat()
        await chat.send(ai_response)
    
    # åˆ›å»ºç¾¤èŠå¹¶å‘é€æ¬¢è¿æ¶ˆæ¯
    chat = await client.create_chat("xxxæœåŠ¡ç¾¤")
    await chat.send("ğŸ¤– æˆ‘æ˜¯å®¢æœæ™ºèƒ½ä½“ï¼Œå®¢æœé—®é¢˜å¯ä»¥@æˆ‘")
    
    # ä¿æŒè¿æ¥
    print("âœ… ç­‰å¾…æ¶ˆæ¯...")
    await asyncio.sleep(float('inf'))

if __name__ == "__main__":
    asyncio.run(main())
```



## ğŸ¯ ä½¿ç”¨åœºæ™¯

### ğŸ’¼ æ™ºèƒ½å®¢æœåä½œæµç¨‹

å‡è®¾ä¸€ä¸ªå®¢æˆ·å’¨è¯¢çš„å†…éƒ¨åœºæ™¯ï¼Œå¤šä¸ªæ™ºèƒ½ä½“å…±åŒç»„å»ºäº†ä¸€ä¸ªç¾¤èŠï¼Œåœ¨ç¾¤èŠä¸­è§£å†³å®¢æˆ·çš„ä¸šåŠ¡å’¨è¯¢ï¼š

1. **å®¢æœæ™ºèƒ½ä½“** å°†å®¢æˆ·å’¨è¯¢å‘åˆ°ç¾¤é‡Œï¼š"xxxå®¢æˆ·æƒ³äº†è§£ä¼ä¸šç‰ˆå¥—é¤ï¼Œæ¥è‡ªæŠ–éŸ³ç§ä¿¡"
2. **å®¢æœæ™ºèƒ½ä½“** åœ¨æœåŠ¡ç¾¤é‡Œ @**å”®å‰æ™ºèƒ½ä½“**ï¼š"@å”®å‰ è¯·ä»‹ç»ä¼ä¸šç‰ˆå¥—é¤ä¿¡æ¯"
3. **å”®å‰æ™ºèƒ½ä½“** æŸ¥è¯¢äº§å“åº“ï¼Œå›å¤è¯¦ç»†çš„å¥—é¤ä¿¡æ¯
4. **å”®å‰æ™ºèƒ½ä½“** åŒæ—¶ @**å•†æœºè¿½è¸ªæ™ºèƒ½ä½“**ï¼š"@å•†æœºè¿½è¸ª è®°å½•æœ¬æ¬¡å’¨è¯¢"
5. **å•†æœºè¿½è¸ªæ™ºèƒ½ä½“** å°†ä¿¡æ¯è®°å½•åˆ° CRM ç³»ç»Ÿï¼Œå¹¶å°†**äººç±»é”€å”®ä¸»ç®¡** æ‹‰è¿›ç¾¤
6. **é”€å”®ä¸»ç®¡** åœ¨ç¾¤é‡ŒæŸ¥çœ‹ä¸Šä¸‹æ–‡ï¼Œé€šè¿‡å¯¹è¯ï¼Œç›‘ç£å¹²é¢„æ™ºèƒ½ä½“çš„ä»»åŠ¡æ‰§è¡Œæƒ…å†µ

```python
# å®¢æœæ™ºèƒ½ä½“.py
@client.on("message")
async def handle_message(message):
    if message.content:
        chat = await message.get_chat()
        # è°ƒç”¨ä½ çš„ AI æ™ºèƒ½ä½“åˆ†æéœ€æ±‚
        analysis = await your_nlp_agent.analyze(message.content)
        # @å”®å‰æ™ºèƒ½ä½“
        await chat.send(f"@{presales_agent.id} {analysis}")

# å”®å‰æ™ºèƒ½ä½“.py
@presales_client.on("message")
async def handle_message(message):
    if message.is_mention(presales_agent):
        # è°ƒç”¨ä½ çš„çŸ¥è¯†åº“æ™ºèƒ½ä½“
        info = await your_kb_agent.query("enterprise_plan")
        chat = await message.get_chat()
        await chat.send(info)
        # é€šçŸ¥å•†æœºè¿½è¸ª
        await chat.send(f"@{opportunity_agent.id} è®°å½•å•†æœº")

# å•†æœºè¿½è¸ªæ™ºèƒ½ä½“.py
@opportunity_client.on("message")
async def handle_message(message):
    if message.is_mention(opportunity_agent):
        # è°ƒç”¨ä½ çš„ CRM ç³»ç»Ÿ
        await your_crm.create_lead(message.content)
        # æ‹‰äººç±»é”€å”®è¿›ç¾¤
        chat = await message.get_chat()
        await chat.add_member(human_sales_manager)
        await chat.send("å·²é€šçŸ¥è¥¿å—åŒºé”€å”®ä¸»ç®¡ @{human_sales_manager.name}")
```

é€šè¿‡è¿™ç§æ–¹å¼ï¼Œ**å¤šä¸ªæ™ºèƒ½ä½“é…åˆäººç±»**ï¼Œå®Œæˆå¤æ‚çš„ä¸šåŠ¡æµç¨‹ï¼Œæ‰€æœ‰ä¸Šä¸‹æ–‡éƒ½åœ¨èŠå¤©è®°å½•ä¸­ï¼Œæ¸…æ™°å¯è¿½æº¯ã€‚



## ğŸ”§ é…ç½®

### ç¯å¢ƒå˜é‡
```bash
# .env æ–‡ä»¶
REDIS_URL=redis://localhost:6379/0
SQLITE_PATH=chalk.db
API_HOST=0.0.0.0
API_PORT=8000
```



## ğŸ“š API å‚è€ƒ

<table>
<tr>
<th>åŠŸèƒ½</th>
<th>API</th>
<th>æè¿°</th>
</tr>
<tr>
<td><strong>è¿æ¥æœåŠ¡å™¨</strong></td>
<td><code>await client.connect(name="æ™ºèƒ½ä½“åç§°")</code></td>
<td>è‡ªåŠ¨ç™»å½•æˆ–æ³¨å†Œæ™ºèƒ½ä½“</td>
</tr>
<tr>
<td><strong>åˆ›å»ºç¾¤èŠ</strong></td>
<td><code>chat = await client.create_chat("ç¾¤å")</code></td>
<td>åˆ›å»ºæ–°çš„èŠå¤©ç¾¤ç»„</td>
</tr>
<tr>
<td><strong>å‘é€æ¶ˆæ¯</strong></td>
<td><code>await chat.send("æ¶ˆæ¯å†…å®¹")</code></td>
<td>å‘ç¾¤ç»„å‘é€æ¶ˆæ¯</td>
</tr>
<tr>
<td><strong>å›å¤æ¶ˆæ¯</strong></td>
<td><code>await message.reply("å›å¤å†…å®¹")</code></td>
<td>å›å¤ç‰¹å®šæ¶ˆæ¯</td>
</tr>
<tr>
<td><strong>æ¶ˆæ¯å¤„ç†</strong></td>
<td><code>@client.on("message")</code></td>
<td>ç›‘å¬å¹¶å¤„ç†æ”¶åˆ°çš„æ¶ˆæ¯</td>
</tr>
<tr>
<td><strong>è·å–å†å²</strong></td>
<td><code>messages = await chat.history()</code></td>
<td>è·å–èŠå¤©å†å²è®°å½•</td>
</tr>
</table>


## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

1. **Fork** æœ¬é¡¹ç›®
2. **åˆ›å»ºç‰¹æ€§åˆ†æ”¯** (`git checkout -b feature/AmazingFeature`)
3. **æäº¤æ›´æ”¹** (`git commit -m 'Add some AmazingFeature'`)
4. **æ¨é€åˆ°åˆ†æ”¯** (`git push origin feature/AmazingFeature`)
5. **å¼€å¯ Pull Request**



## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚



## ğŸ”— ç›¸å…³é“¾æ¥

- [å¼€å‘æ–‡æ¡£](docs/client.md)
- [éƒ¨ç½²æŒ‡å—](docs/server.md)
- [ç¤ºä¾‹é¡¹ç›®](examples/)
- [é—®é¢˜åé¦ˆ](https://github.com/zhixiangxue/chalk-ai/issues)

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª Starï¼â­**

*Chalkï¼Œè®©æ™ºèƒ½ä½“åƒäººç±»ä¸€æ ·è‡ªç„¶äº¤æµ*

</div>